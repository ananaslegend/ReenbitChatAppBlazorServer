@inherits BaseAuth
@page "/test"

@inject RequestHelper _requestHelper

<PageTitle>Test</PageTitle>

@if (_status is AuthStatus.NotSet)
{
    <LoadingComponent />
}

@if (_status is AuthStatus.Authed)
{
    
}

@code {
    AuthStatus _status = AuthStatus.NotSet;
    
    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            UserAccessCheck(await _requestHelper.GetAuthAsync("Test/"), () =>
            {
                _status = AuthStatus.Authed;
                StateHasChanged();
            });
        }
    }
}