@inherits BaseAuth
@page "/test"

@inject RequestHandler _requestHelper

<PageTitle>Test</PageTitle>

@if (_status == AuthState.NotSet)
{
    <LoadingComponent />
}

@if (_status == AuthState.Authed)
{
    
}

@code {
    AuthState _status = AuthState.NotSet;
    
    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            UserAccessVerification(await _requestHelper.GetAuthAsync("Login/GetAuthorize/"), () =>
            {
                _status = AuthState.Authed;
                StateHasChanged();
            });
        }
    }
}